{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Redirect}from'react-router-dom';import{Spinner,Alert}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const RecipePage=_ref=>{let{isLoggedIn,socket}=_ref;const[recipe,setRecipe]=useState('');const[ingredients,setIngredients]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{if(isLoggedIn){socket.on('update-recipe',recipeData=>{setRecipe(recipeData.recipe);setLoading(false);});socket.on('error',error=>{setError(\"Error: \".concat(error.message||'Unknown error occurred.'));setLoading(false);});}return()=>{socket.off('update-recipe');socket.off('error');};},[isLoggedIn,socket]);if(!isLoggedIn){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}const handleFormSubmit=event=>{event.preventDefault();if(ingredients.trim()===''){setError('Please enter some ingredients.');return;}setError(null);setLoading(true);const ingredientsArray=ingredients.split(',').map(i=>i.trim());socket.emit('request-recipe',ingredientsArray);setIngredients('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recipe Suggestions\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ingredientsInput\",children:\"Ingredients\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"ingredientsInput\",value:ingredients,onChange:e=>setIngredients(e.target.value),placeholder:\"Enter ingredients separated by commas\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:\"Get Recipe\"})]}),loading&&/*#__PURE__*/_jsx(Spinner,{animation:\"border\"}),!loading&&recipe&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recipe\"}),/*#__PURE__*/_jsx(\"p\",{children:recipe})]})]});};export default RecipePage;","map":{"version":3,"names":["React","useState","useEffect","Redirect","Spinner","Alert","jsx","_jsx","jsxs","_jsxs","RecipePage","_ref","isLoggedIn","socket","recipe","setRecipe","ingredients","setIngredients","loading","setLoading","error","setError","on","recipeData","concat","message","off","to","handleFormSubmit","event","preventDefault","trim","ingredientsArray","split","map","i","emit","className","children","onSubmit","htmlFor","type","id","value","onChange","e","target","placeholder","variant","disabled","animation"],"sources":["/root/gpt-pilot/workspace/SavorySagas.com/client/src/pages/RecipePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Spinner, Alert } from 'react-bootstrap';\n\nconst RecipePage = ({ isLoggedIn, socket }) => {\n  const [recipe, setRecipe] = useState('');\n  const [ingredients, setIngredients] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      socket.on('update-recipe', (recipeData) => {\n        setRecipe(recipeData.recipe);\n        setLoading(false);\n      });\n\n      socket.on('error', (error) => {\n        setError(`Error: ${error.message || 'Unknown error occurred.'}`);\n        setLoading(false);\n      });\n    }\n\n    return () => {\n      socket.off('update-recipe');\n      socket.off('error');\n    };\n  }, [isLoggedIn, socket]);\n\n  if (!isLoggedIn) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    if (ingredients.trim() === '') {\n      setError('Please enter some ingredients.');\n      return;\n    }\n    setError(null);\n    setLoading(true);\n    const ingredientsArray = ingredients.split(',').map(i => i.trim());\n    socket.emit('request-recipe', ingredientsArray);\n    setIngredients('');\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <h2>Recipe Suggestions</h2>\n      <form onSubmit={handleFormSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"ingredientsInput\">Ingredients</label>\n          <input type=\"text\" className=\"form-control\" id=\"ingredientsInput\" value={ingredients} onChange={(e) => setIngredients(e.target.value)} placeholder=\"Enter ingredients separated by commas\" />\n          {error && <Alert variant='danger'>{error}</Alert>}\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>Get Recipe</button>\n      </form>\n      {loading && <Spinner animation=\"border\" />}\n      {!loading && recipe && (\n        <div className=\"mt-4\">\n          <h3>Recipe</h3>\n          <p>{recipe}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RecipePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}